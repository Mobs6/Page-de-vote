<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Système de Vote</title>
<style>
    body {
        background-image: url('lien_de_votre_image_discord.jpg');
        background-size: cover;
        background-repeat: no-repeat;
        color: gold;
        font-family: Arial, sans-serif;
    }
    .container {
        max-width: 600px;
        margin: 0 auto;
        text-align: center;
        padding: 20px;
        background-color: rgba(0, 0, 0, 0.7);
        border-radius: 10px;
        box-shadow: 0 0 10px rgba(0, 0, 0, 0.5);
    }
    h1 {
        color: gold;
    }
    button {
        padding: 10px 20px;
        background-color: gold;
        color: black;
        border: none;
        border-radius: 5px;
        cursor: pointer;
        margin-top: 10px;
    }
    button:hover {
        background-color: #ffd700;
    }
    #voters-list {
        margin-top: 20px;
        text-align: left;
    }
</style>
</head>
<body>
<div class="container">
    <h1>Système de Vote</h1>
    <button id="vote-btn" onclick="castVote()">Voter</button>
    <div id="voters-list">
        <!-- La liste des noms et du nombre de votes sera affichée ici -->
    </div>
</div>

<script>
    // Fonction pour voter
    function castVote() {
        // Vérifier si l'utilisateur a déjà voté dans les dernières 1 heure
        var lastVoteTime = localStorage.getItem('lastVoteTime');
        if (lastVoteTime && (Date.now() - lastVoteTime < 3600000)) {
            alert("Vous avez déjà voté récemment. Vous pouvez revoter dans 1 heure.");
            return;
        }

        // Demander le nom de l'utilisateur
        var voterName = prompt("Entrez votre nom :");
        if (!voterName) {
            alert("Nom invalide. Veuillez réessayer.");
            return;
        }

        // Obtenir le nombre de votes actuel de l'utilisateur
        var votes = parseInt(localStorage.getItem(voterName)) || 0;

        // Incrémenter le nombre de votes de l'utilisateur
        votes++;
        localStorage.setItem(voterName, votes.toString());

        // Enregistrer l'heure du vote
        localStorage.setItem('lastVoteTime', Date.now().toString());

        // Rafraîchir la liste des votes
        refreshVotersList();
    }

    // Fonction pour rafraîchir la liste des votes
    function refreshVotersList() {
        var votersList = document.getElementById('voters-list');
        votersList.innerHTML = "<h2>Liste des Votes</h2>";
        
        // Parcourir tous les noms stockés dans localStorage
        for (var i = 0; i < localStorage.length; i++) {
            var key = localStorage.key(i);
            // Vérifier si la clé correspond à un nom d'utilisateur
            if (key !== 'lastVoteTime') {
                var votes = localStorage.getItem(key);
                votersList.innerHTML += "<p>" + key + ": " + votes + " vote(s)</p>";
            }
        }
    }

    // Appel initial pour afficher la liste des votes
    refreshVotersList();
</script>
</body>
</html>
